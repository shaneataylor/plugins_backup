<project name="techcomm" default="all" basedir=".">
    <description>
        Build the WebAssign Technical Communications Deliverables.
    </description>
  <taskdef resource="net/sf/antcontrib/antcontrib.properties">
  <classpath>
    <pathelement location="../deps/ant-contrib/ant-contrib/ant-contrib-1.0b3.jar"/>
  </classpath>
  </taskdef>
  <property name="source.dir" location=".." />
  <property name="args.logdir" location="logs" />
  <property name="clean.temp" value="no" />
  <property name="clean.output" value="yes" />
  <property name="generate.copy.outer" value="1" />
  <property name="dita.dir" location="deps/DITA-OT1.8"/><!-- If possible, set from environment -->
  
  <property name="transtype" value="xhtml"/>
  <property name="args.copycss" value="yes" />
  <property name="args.outext" value=".htm" />
  <!--<property name="args.css" value="${dita.dir}/plugins/net.webassign.webhelp/webassign_help.css" />
    <property name="args.ftr" value="${dita.dir}/plugins/net.webassign.webhelp/webassign_help_footer.html" />-->
  <property name="args.xhtml.toc" value="toc" />
  <property name="args.hide.parent.link" value="no" />
  <property name="args.breadcrumbs" value="yes" />
  <property name="args.debug" value="no" />
  <property name="clean.output" value="yes" />
  <property name="dita.ext" value=".xml" />
  <property name="args.logdir" location="logs"/>
  
  <import file="${dita.dir}/build.xml" />
  
  <target name="timestamp">
    <tstamp>
      <format property="build.start" pattern="MM/dd/yyyy hh:mm"/>
    </tstamp>
    <!--<echo level="info">Logging to ${local.build.log}</echo>
    <record name="${local.build.log}" loglevel="verbose" append="false"/>-->
  </target>
      
  <target name="all" depends="timestamp">
    <echo level="info">Building styleguide</echo>
    <antcall target="styleguide" />
  </target>
  
  <target name="styleguide" depends="timestamp">
    <antcall target="clean_output_path" >
      <param name="output.dir" location="out/styleguide"/>
    </antcall>
    <antcall target="init">
      <param name="output.dir" location="out/styleguide" />
      <param name="args.input" value="${source.dir}/m_d_styleguide.ditamap"/>
      <!--<param name="args.filter" value="${source.dir}/flagstatus.ditaval" />--><!-- 1.6.x -->
      <param name="dita.temp.dir" location="temp/styleguide" />
      <!--<param name="args.ftr" value="/Users/staylor/Documents/Repos/build-techcomm/_temp_header_.html" />-->
    </antcall>
    <antcall target="copy_extra_files">
      <param name="output.dir" value="out/styleguide"/>
    </antcall>
  </target>
  
  <target name="clean_output_path">
    <delete dir="${output.dir}"/>
  </target>
  
  <target name="copy_extra_files">
  </target>
  
</project>
