
<project name="techcomm" default="all" basedir="dita_source_files">
    <description>
      Build the WebAssign Technical Communications Deliverables.
    </description>
    
    <property name="dita.dir" location="../deps/DITA-OT1.7.2"/><!-- If possible, set from environment -->

    <property name="transtype" value="h5help"/>
    <property name="args.copycss" value="yes" />
    <property name="args.outext" value=".htm" />
    <!--<property name="args.css" value="${dita.dir}/plugins/net.webassign.webhelp/webassign_help.css" />
    <property name="args.ftr" value="${dita.dir}/plugins/net.webassign.webhelp/webassign_help_footer.html" />-->
    <property name="args.xhtml.toc" value="toc" />
    <property name="args.hide.parent.link" value="no" />
    <property name="args.breadcrumbs" value="yes" />
    <property name="args.debug" value="no" />
    <property name="clean.output" value="yes" />
    <property name="dita.ext" value=".xml" />
    <property name="args.logdir" location="../logs"/>
    
    <import file="${dita.dir}/build.xml" />
    
    <target name="all">
        <antcall target="instructor" />
        <antcall target="student" />
        <antcall target="admin" />
        <antcall target="internal_admin" />
    </target>
    
    <target name="instructor">
        <antcall target="clean_output_path" >
            <param name="output.dir" location="../out/instructor_guide"/>
        </antcall>
        <antcall target="init">
            <param name="output.dir" location="../out/instructor_guide" />
            <param name="custom.webhelp.search" value="google_instructor" />
            <param name="args.input" value="${source.dir}/m_i_help.ditamap"/>
            <param name="args.filter" value="${source.dir}/d_i_help.ditaval" /><!-- 1.6.x -->
            <param name="dita.temp.dir" location="../temp/m_i_help" />
            <param name="args.ftr" value="/Users/staylor/Documents/Repos/build-techcomm/_temp_header_.html" />
        </antcall>
        <antcall target="copy_extra_files">
            <param name="output.dir" value="../out/instructor_guide"/>
        </antcall>
    </target>
    
    <target name="student">
        <antcall target="clean_output_path" >
            <param name="output.dir" location="../out/student_guide"/>
        </antcall>
        <antcall target="init">
            <param name="output.dir" location="../out/student_guide"/>
            <param name="custom.webhelp.search" value="google_student" />
            <param name="args.input" value="${source.dir}/m_s_help.ditamap"/>
            <param name="args.filter" value="${source.dir}/d_s_help.ditaval" /><!-- 1.6.x -->
            <param name="dita.temp.dir" location="../temp/m_s_help" />
            <param name="args.ftr" value="/Users/staylor/Documents/Repos/build-techcomm/_temp_header_.html" />
        </antcall>
        <antcall target="copy_extra_files" >
            <param name="output.dir" location="../out/student_guide"/>
        </antcall>
    </target>
    
    <target name="admin">
        <antcall target="clean_output_path" >
            <param name="output.dir" location="../out/admin"/>
        </antcall>
        <antcall target="init">
            <param name="output.dir" location="../out/admin" />
            <param name="custom.webhelp.search" value="google_admin" />
            <param name="args.input" value="${source.dir}/m_d_sysadmin.ditamap"/>
            <param name="args.filter" value="${source.dir}/d_d_admin_help.ditaval" /><!-- 1.6.x -->
            <param name="dita.temp.dir" location="../temp/m_d_sysadmin" />
            <param name="args.ftr" value="/Users/staylor/Documents/Repos/build-techcomm/_temp_header_.html" />
        </antcall>
        <antcall target="copy_extra_files">
            <param name="output.dir" value="../out/admin"/>
        </antcall>
    </target>
    
    <target name="internal_admin">
        <antcall target="clean_output_path" >
            <param name="output.dir" location="../out/internal_admin"/>
        </antcall>
        <antcall target="init">
            <param name="output.dir" location="../out/internal_admin" />
            <param name="custom.webhelp.search" value="no" />
            <param name="args.input" value="${source.dir}/m_w_internal_admin.ditamap"/>
            <param name="args.ftr" value="${source.dir}/internal_admin_footer.html"/>
            <param name="args.filter" value="${source.dir}/d_w_help.ditaval" /><!-- 1.6.x -->
            <param name="dita.temp.dir" location="../temp/m_w_internal_admin" />
            
        </antcall>
        <antcall target="copy_extra_files">
            <param name="output.dir" value="../out/internal_admin"/>
        </antcall>
    </target>
    
    <target name="clean_output_path">
        <delete dir="${output.dir}"/>
    </target>
    
    <target name="copy_extra_files">
        <copy file="${source.dir}/csh.json" todir="${output.dir}" verbose="true"/>
        <!--<copy file="${dita.dir}/plugins/net.webassign.webhelp/googlea98ae97064cf3d0e.html" todir="${output.dir}" verbose="true"/>
        <copy file="${dita.dir}/plugins/net.webassign.webhelp/quickstart.css" todir="${output.dir}" verbose="true"/>-->
        
    </target>


</project>
